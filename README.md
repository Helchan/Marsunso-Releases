# Marsunso - 书签快捷搜索插件

<div align="center">

[![Version](https://img.shields.io/badge/version-1.2.6-blue.svg)](https://github.com/Helchan/Marsunso.git)
[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](LICENSE)
[![Chrome](https://img.shields.io/badge/chrome-88%2B-brightgreen.svg)](https://www.google.com/chrome/)

一个提升浏览器书签访问效率的 Chrome 扩展程序，通过快捷键快速搜索和访问书签，让书签管理如同 macOS Spotlight 一般流畅便捷。

[功能特性](#功能特性) • [安装方法](#安装方法) • [使用指南](#使用指南) • [常见问题](#常见问题) • [获取帮助](#获取帮助)

</div>

---

## 产品简介

Marsunso 是一个轻量级的 Chrome 书签快捷搜索插件，旨在解决传统书签管理的效率问题。通过类似 macOS Spotlight 的交互体验，用户可以快速搜索、导航和访问书签，无需在书签栏中逐层点击。

### 为什么选择 Marsunso？

- **极速访问**：`Ctrl+K` / `Command+K` 一键唤起，无需鼠标操作
- **智能搜索**：支持书签名称、URL、拼音匹配，多种搜索模式自动切换
- **层级导航**：支持多级路径搜索和精确路径导航
- **无缝体验**：响应迅速，状态自动保存，焦点智能管理
- **隐私安全**：所有数据本地处理，不上传任何信息

---

## 功能特性

### 快捷键唤起

- **全局快捷键**：`Ctrl+K` (Windows/Linux) 或 `Command+K` (macOS)
- **智能聚焦**：面板已打开时重复按快捷键自动聚焦搜索框
- **状态保存**：关闭面板后短时间内重新打开，自动恢复搜索内容

### 智能搜索

- **多模式自动切换**：
  - **默认模式**：展示所有二级书签
  - **模糊搜索**：支持书签名称、URL、拼音匹配
  - **路径导航**：使用 `/` 开头精确导航到指定目录

- **拼音匹配**：
  - 全拼匹配：`woaixuexi` → "我爱学习"
  - 首字母匹配：`wxxx` → "我爱学习"
  - 混合匹配：`w学xi` → "我爱学习"
  - 非连续匹配：`我学` → "我爱学习"
  - 支持多音字、生僻字

- **层级匹配**：支持多关键词搜索，如 `学习 读书` 在"学习"目录下搜索"读书"

### 层级导航

- **精确路径导航**：`/学习/课程` 直接进入指定目录
- **路径搜索混合**：`/学习/课程 语文` 在指定路径下搜索
- **快速返回**：`Cmd/Ctrl + ↑` 返回上一层
- **快速进入**：`Cmd/Ctrl + ↓` 进入目录或后台打开书签

### Spotlight 风格界面

- 简洁美观的半透明磨砂背景
- 自动获取网站图标，文件夹使用专属图标
- 选中项高亮显示，滚动自动跟随

### 书签管理功能

- **右键菜单操作**：在搜索结果列表中右键点击书签/文件夹，弹出操作菜单
- **三项管理功能**：
  - **编辑**：修改书签/文件夹的名称、URL（仅书签）、移动位置
  - **删除**：删除书签/文件夹（含确认对话框，防止误操作）
  - **管理**：打开浏览器原生书签管理器并自动定位
- **智能浏览器适配**：
  - 自动识别 Chrome/Edge 浏览器类型
  - 对于书签：跳转到父文件夹位置
  - 对于文件夹：直接跳转到该文件夹
  - 智能复用或新建书签管理器标签页
- **编辑面板功能**：
  - **名称编辑**：修改书签或文件夹的名称
  - **URL 编辑**：修改书签的网址（文件夹无此项）
  - **位置移动**：通过文件夹树选择器，将书签移动到其他文件夹
  - **文件夹树禁用**：编辑文件夹时，自身及子孙文件夹不可选（防止循环）
  - **目录树键盘导航**（v1.2.6 新增）：
    - **↑ ↓ 键**：在目录树中快速切换相邻节点，支持循环导航
    - **→ ← 键**：展开/折叠选中节点，无需鼠标点击
    - **Enter 键**：保存编辑
    - **ESC 键**：取消编辑
  - **位置标签**（v1.2.6 新增）：目录树上方显示"位置"标签，说明目录树用途
  - **目录树右键管理**（v1.2.5 新增）：
    - **修改**：直接在目录树中原位编辑文件夹名称，支持 Enter 保存、ESC 取消
    - **删除**：删除选中的文件夹节点，弹出确认对话框防止误删除
    - **新建文件夹**：在当前节点下创建子文件夹，自动进入编辑态
    - **所见即所得**：目录树内的修改操作直接生效，无需点击“保存”按钮
  - **智能保存校验**：保存前自动校验必填项和目标文件夹选中状态
- **删除保护**：
  - 根节点（书签栏、其他书签等）不显示右键菜单
  - 删除前弹出确认对话框
  - 文件夹删除会警告"将删除所有内容"
  - 浏览器内置节点禁止删除，会弹出友好提示
- **一致性设计**：编辑面板延续了主搜索面板的 Spotlight 风格，半透明磨砂背景，视觉体验统一
- **紧凑布局优化**：
  - 字体大小 13px，更接近浏览器原生风格
  - 标签和输入框精确对齐（inline-block 布局方案）
  - 目录树容器固定高度 280px，展示更多内容
  - 统一调整间距和内边距，提升视觉密度
- **自定义提示对话框**：使用自定义弹窗替代浏览器 alert()，保持插件UI一致性
- **实时同步**：编辑/删除保存后，主搜索面板自动刷新数据，确保一致性

---

## 安装方法

### 方式一：Chrome 网上应用店安装（推荐）

> 🚧 **开发中**：插件正在准备发布到 Chrome 网上应用店，敬请期待。

### 方式二：手动安装

1. **下载插件**：从 [GitHub Releases](https://github.com/Helchan/Marsunso/releases) 下载最新版本的 ZIP 文件

2. **解压文件**：将下载的 ZIP 文件解压到任意文件夹

3. **打开 Chrome 扩展程序管理页面**：
   - 在地址栏输入 `chrome://extensions/` 并回车
   - 或通过菜单：`更多工具` → `扩展程序`

4. **启用开发者模式**：
   - 点击页面右上角的 "开发者模式" 开关

5. **加载扩展程序**：
   - 点击 "加载已解压的扩展程序" 按钮
   - 选择解压后的文件夹（包含 `manifest.json` 的文件夹）

6. **验证安装**：
   - 扩展程序列表中出现 "Marsunso - 书签快捷搜索"
   - 按 `Ctrl+K` 或 `Command+K` 测试唤起面板

### 兼容性

| 浏览器 | 最低版本 | 说明 |
|--------|---------|------|
| Google Chrome | 88+ | 推荐使用最新稳定版 |
| Microsoft Edge | 88+ | 基于 Chromium，完全兼容 |
| 其他 Chromium 浏览器 | 88+ | 理论兼容，建议测试验证 |

---

## 使用指南

### 快速上手

1. **唤起搜索面板**：按 `Ctrl+K` (Windows/Linux) 或 `Command+K` (macOS)
2. **输入关键词**：直接输入书签名称、URL 或拼音
3. **选择结果**：使用 `↑` `↓` 方向键或鼠标点击
4. **打开书签**：按 `Enter` 或点击打开
5. **关闭面板**：按 `Esc` 或点击其他区域

### 搜索技巧

#### 模糊搜索（日常使用最多）

| 输入示例 | 匹配规则 | 说明 |
|---------|---------|------|
| `vue` | 单关键词匹配 | 搜索书签名称或 URL 包含 "vue" 的项 |
| `wxxx` | 拼音首字母 | 匹配 "我爱学习" 等汉字 |
| `woaixuexi` | 全拼匹配 | 匹配 "我爱学习" |
| `w学xi` | 混合输入 | 拼音与汉字混合匹配 "我爱学习" |
| `我学` | 非连续匹配 | 跳跃式匹配 "我爱学习" |
| `学习 读书` | 多级搜索 | 在 "学习" 目录下搜索 "读书" |

#### 路径导航（精确定位目录）

| 输入内容 | 匹配效果 |
|---------|----------|
| `/学习/课程` | 精确进入 "学习" → "课程" 目录 |
| `/学习/课程 语文` | 在 "课程" 目录下模糊搜索 "语文" |
| `/学习/课程/` | 末尾斜杠，展示 "课程" 目录的所有子项 |

### 键盘快捷键

| 按键 | 功能 |
|------|------|
| `Ctrl+K` / `Command+K` | 打开搜索面板 |
| `↑` / `↓` | 上下选择 |
| `Cmd/Ctrl + ←` / `→` | 跳转到第一项/最后一项 |
| `Enter` | 打开书签（新标签页）或进入目录 |
| `Ctrl/Cmd + Enter` | 后台打开书签（保持面板） |
| `Cmd/Ctrl + ↑` | 返回上层目录 |
| `Cmd/Ctrl + ↓` | 进入目录或后台打开书签 |
| `Cmd/Ctrl + Backspace` | 清空搜索框 |
| `Esc` | 关闭面板 |

> **提示**：Mac 系统使用 `Command` 键，Windows/Linux 使用 `Ctrl` 键。

### 鼠标操作

| 操作 | 效果 |
|------|------|
| **单击书签** | 新标签页打开并切换 |
| **Ctrl + 单击书签** | 后台打开，保持当前页面 |
| **单击文件夹** | 进入该文件夹 |
| **右键点击书签/文件夹** | 弹出管理菜单（编辑/删除/管理） |

### 书签管理

**打开管理菜单**：
1. 在搜索结果列表中右键点击书签或文件夹
2. 从弹出菜单中选择对应操作

**三项管理功能**：

| 操作 | 说明 |
|------|------|
| **编辑** | 打开编辑面板，修改书签/文件夹信息 |
| **删除** | 删除书签/文件夹，会弹出确认对话框防止误操作 |
| **管理** | 打开浏览器原生书签管理器并自动定位到对应位置 |

**编辑操作说明**：

| 操作 | 说明 |
|------|------|
| **修改名称** | 在"名称"输入框中修改书签或文件夹的名称 |
| **修改网址** | 在"URL"输入框中修改书签的网址（仅限书签） |
| **移动位置** | 在文件夹树中选择目标文件夹，点击展开/折叠箭头浏览层级 |
| **保存修改** | 点击"保存"按钮或按 `Enter` 键 |
| **取消编辑** | 点击"取消"按钮或按 `Esc` 键 |

**管理功能特性**：
- **智能浏览器识别**：自动识别 Chrome 或 Edge 浏览器，使用对应的协议 URL
- **智能定位**：
  - 书签：定位到所在父文件夹
  - 文件夹：直接定位到该文件夹
- **标签页复用**：如果书签管理器已打开，刷新并激活该标签页；否则新建标签页
- **自动关闭**：执行管理操作后自动关闭 popup 弹窗

**删除功能特性**：
- **确认对话框**：删除前弹出确认提示，显示项目名称和类型
- **文件夹警告**：删除文件夹时特别提示"将删除所有内容"
- **根节点保护**：书签栏、其他书签等根节点不显示右键菜单，无法删除
- **自动刷新**：删除成功后自动刷新搜索结果

**文件夹树操作**：
- 点击文件夹前的 `▶` 箭头展开子文件夹
- 点击文件夹名称选中该文件夹作为目标位置
- 已展开的文件夹显示为 `▼` 箭头，再次点击可折叠
- 默认展开并选中书签的当前所在文件夹

### 实用技巧

**批量打开书签**：
1. 使用 `Ctrl+Enter` 或 `Ctrl+单击` 后台打开第一个书签
2. 面板保持打开，搜索内容不变
3. 继续点击其他书签，实现快速批量打开

**状态保存**：
- 关闭面板后短时间内重新打开，自动恢复上次的搜索内容
- 适合快速查找、临时关闭、再次查找的场景

---

## 常见问题

### Q1: 快捷键不生效？

**解决方法**：
1. 检查扩展是否正确加载（`chrome://extensions/` 查看状态）
2. 检查快捷键是否与其他扩展冲突（`chrome://extensions/shortcuts` 查看和修改）
3. 注意：某些特殊页面（`chrome://`、`chrome-extension://`）不支持扩展快捷键

### Q2: 拼音搜索不准确？

**解决方法**：尝试不同的输入方式：
- 全拼：`woaixuexi`
- 首字母：`wxxx`
- 混合：`w爱xi`
- 非连续：`我学`

### Q3: 图标显示异常？

**可能原因及解决**：
1. 图标依赖网络服务，请确保网络畅通
2. 某些网站可能没有图标，会显示默认书签图标
3. 图标加载失败会自动使用默认图标

### Q4: 如何清除缓存？

**操作步骤**：
1. 关闭所有插件面板
2. 在扩展管理页面（`chrome://extensions/`）点击 Marsunso 卡片上的 "刷新" 按钮
3. 重新打开面板，缓存将重新构建

### Q5: 支持其他浏览器吗？

**支持情况**：
- ✅ 支持所有基于 Chromium 88+ 的浏览器（如 Edge、Brave、Opera）
- ❌ 暂不支持 Firefox

---

## 获取帮助

### 报告问题

如果您在使用过程中遇到问题，欢迎向我们反馈：

**在哪里提交？**
- GitHub Issues：[https://github.com/Helchan/Marsunso/issues](https://github.com/Helchan/Marsunso/issues)

**如何描述问题？**
提交问题时，请尽量包含以下信息，这将帮助我们更快定位和解决问题：

1. **问题描述**：您期望的行为是什么？实际发生了什么？
2. **复现步骤**：如何一步步重现这个问题？
3. **环境信息**：
   - 操作系统（如 Windows 11、macOS Sonoma 等）
   - 浏览器及版本（如 Chrome 120）
   - 插件版本（可在 `chrome://extensions/` 查看）
4. **截图或录屏**：如有可能，请附上相关截图

### 功能建议

有好的想法或功能需求？我们非常期待您的建议！

- 在 [Issues](https://github.com/Helchan/Marsunso/issues) 页面提交功能建议
- 请详细描述您希望的功能以及使用场景

### 用户支持

- **GitHub Discussions**：[https://github.com/Helchan/Marsunso/discussions](https://github.com/Helchan/Marsunso/discussions) - 与其他用户交流使用心得
- **项目主页**：[https://github.com/Helchan/Marsunso](https://github.com/Helchan/Marsunso)

### 开发者文档

如果您是开发者，想要了解技术实现细节或参与项目贡献，请查阅 [Marsunso产品说明书.md](Marsunso产品说明书.md)。

---

## 隐私与安全

**我们的承诺**：

- ✅ 所有数据仅在本地处理，不上传到任何服务器
- ✅ 不收集用户浏览记录或书签内容
- ✅ 不使用第三方统计或分析服务
- ✅ 不注入任何跟踪代码到网页
- ✅ 图标获取仅发送域名信息（不含完整 URL）

**权限说明**：
- `bookmarks`：读取书签数据，用于搜索功能
- `tabs`：打开和管理标签页
- `storage`：本地存储搜索状态（仅用于短期缓存）

---

## 许可证

本项目采用 [Apache License 2.0](LICENSE) 开源协议。

---

## 鸣谢

感谢以下开源项目和服务：

- [pinyin-pro](https://github.com/zh-lx/pinyin-pro) - 汉字拼音转换库
- [Google Favicon API](https://www.google.com/s2/favicons) - 网站图标服务
- Chrome Extensions API - 浏览器扩展能力

---

<div align="center">

**如果这个项目对你有帮助，欢迎 Star ⭐️ 支持！**

[报告问题](https://github.com/Helchan/Marsunso/issues) • [功能建议](https://github.com/Helchan/Marsunso/issues) • [使用讨论](https://github.com/Helchan/Marsunso/discussions)

Made with ❤️ by Marsunso Contributors

</div>
